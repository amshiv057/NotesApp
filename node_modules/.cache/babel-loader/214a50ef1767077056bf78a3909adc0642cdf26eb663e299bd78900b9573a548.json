{"ast":null,"code":"import _regeneratorRuntime from\"E:/WebDevelop/React/Project 07/movies-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/WebDevelop/React/Project 07/movies-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"E:/WebDevelop/React/Project 07/movies-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/WebDevelop/React/Project 07/movies-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Sidebar from\"./Components/Sider\";import Editor from\"./Components/Editor\";import Split from\"react-split\";import\"./index.css\";import React from\"react\";import{addDoc,onSnapshot,doc,deleteDoc,setDoc}from\"firebase/firestore\";import{notesCollection,db}from\"./Firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),notes=_React$useState2[0],setNotes=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),currentNoteId=_React$useState4[0],setCurrentNoteId=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),tempNoteText=_React$useState6[0],setTempNoteText=_React$useState6[1];var currentNote=notes.find(function(note){return note.id===currentNoteId;})||notes[0];var sortArr=notes.sort(function(a,b){return b.updateAt-a.updateAt;});React.useEffect(function(){var unsubscribe=onSnapshot(notesCollection,function(snapshot){var notesArr=snapshot.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});});setNotes(notesArr);});return unsubscribe;},[]);React.useEffect(function(){if(currentNote){setTempNoteText(currentNote.body);}},[currentNote]);React.useEffect(function(){if(!currentNoteId){var _notes$;setCurrentNoteId((_notes$=notes[0])===null||_notes$===void 0?void 0:_notes$.id);}},[notes]);React.useEffect(function(){var timeoutId=setTimeout(function(){if(tempNoteText!==currentNote.body){updateNote(tempNoteText);}},500);return function(){return clearTimeout(timeoutId);};},[tempNoteText]);/*#__PURE__*/_jsx(\"img\",{src:\"4021693.png\",alt:\"logo\",width:100,height:100});function createNewNote(){return _createNewNote.apply(this,arguments);}function _createNewNote(){_createNewNote=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newNote,newNoteRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:newNote={body:\"# Type your markdown notes title here\",createdAt:Date.now(),updateAt:Date.now()};_context.next=3;return addDoc(notesCollection,newNote);case 3:newNoteRef=_context.sent;setCurrentNoteId(newNoteRef.id);case 5:case\"end\":return _context.stop();}},_callee);}));return _createNewNote.apply(this,arguments);}function updateNote(_x){return _updateNote.apply(this,arguments);}function _updateNote(){_updateNote=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(text){var docref;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:docref=doc(db,\"notes\",currentNoteId);_context2.next=3;return setDoc(docref,{body:text,updateAt:Date.now()},{merge:true});case 3:case\"end\":return _context2.stop();}},_callee2);}));return _updateNote.apply(this,arguments);}function deleteNote(_x2){return _deleteNote.apply(this,arguments);}function _deleteNote(){_deleteNote=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(noteId){var docref;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:docref=doc(db,\"notes\",noteId);_context3.next=3;return deleteDoc(docref);case 3:case\"end\":return _context3.stop();}},_callee3);}));return _deleteNote.apply(this,arguments);}return/*#__PURE__*/_jsx(\"main\",{children:notes.length>0?/*#__PURE__*/_jsxs(Split,{sizes:[30,70],direction:\"horizontal\",className:\"split\",children:[/*#__PURE__*/_jsx(Sidebar,{notes:sortArr,currentNote:currentNote,setCurrentNoteId:setCurrentNoteId,newNote:createNewNote,deleteNote:deleteNote}),/*#__PURE__*/_jsx(Editor,{tempNoteText:tempNoteText,setTempNoteText:setTempNoteText})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-notes\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"You have no notes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"first-note\",onClick:createNewNote,children:\"Create one now\"})]})});}","map":{"version":3,"names":["Sidebar","Editor","Split","React","addDoc","onSnapshot","doc","deleteDoc","setDoc","notesCollection","db","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","notes","setNotes","_React$useState3","_React$useState4","currentNoteId","setCurrentNoteId","_React$useState5","_React$useState6","tempNoteText","setTempNoteText","currentNote","find","note","id","sortArr","sort","a","b","updateAt","useEffect","unsubscribe","snapshot","notesArr","docs","map","_objectSpread","data","body","_notes$","timeoutId","setTimeout","updateNote","clearTimeout","src","alt","width","height","createNewNote","_createNewNote","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newNote","newNoteRef","wrap","_callee$","_context","prev","next","createdAt","Date","now","sent","stop","_x","_updateNote","_callee2","text","docref","_callee2$","_context2","merge","deleteNote","_x2","_deleteNote","_callee3","noteId","_callee3$","_context3","children","length","sizes","direction","className","onClick"],"sources":["E:/WebDevelop/React/Project 07/movies-app/src/App.js"],"sourcesContent":["import Sidebar from \"./Components/Sider\";\nimport Editor from \"./Components/Editor\";\nimport Split from \"react-split\";\nimport \"./index.css\";\nimport React from \"react\";\nimport { addDoc, onSnapshot, doc, deleteDoc, setDoc } from \"firebase/firestore\";\nimport { notesCollection, db } from \"./Firebase\";\n\nexport default function App() {\n  const [notes, setNotes] = React.useState([]);\n  const [currentNoteId, setCurrentNoteId] = React.useState(\"\");\n\n  const [tempNoteText, setTempNoteText] = React.useState(\"\");\n\n  const currentNote =\n    notes.find((note) => note.id === currentNoteId) || notes[0];\n\n  const sortArr = notes.sort((a, b) => b.updateAt - a.updateAt);\n\n  React.useEffect(() => {\n    const unsubscribe = onSnapshot(notesCollection, function (snapshot) {\n      const notesArr = snapshot.docs.map((doc) => ({\n        ...doc.data(),\n        id: doc.id,\n      }));\n      setNotes(notesArr);\n    });\n    return unsubscribe;\n  }, []);\n\n  React.useEffect(() => {\n    if (currentNote) {\n      setTempNoteText(currentNote.body);\n    }\n  }, [currentNote]);\n\n  React.useEffect(() => {\n    if (!currentNoteId) {\n      setCurrentNoteId(notes[0]?.id);\n    }\n  }, [notes]);\n\n  React.useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      if (tempNoteText !== currentNote.body) {\n        updateNote(tempNoteText);\n      }\n    }, 500);\n    return () => clearTimeout(timeoutId);\n  }, [tempNoteText]);\n  <img src=\"4021693.png\" alt=\"logo\" width={100} height={100} />;\n  async function createNewNote() {\n    const newNote = {\n      body: \"# Type your markdown notes title here\",\n      createdAt: Date.now(),\n      updateAt: Date.now(),\n    };\n\n    const newNoteRef = await addDoc(notesCollection, newNote);\n    setCurrentNoteId(newNoteRef.id);\n  }\n\n  async function updateNote(text) {\n    const docref = doc(db, \"notes\", currentNoteId);\n    await setDoc(docref, { body: text, updateAt: Date.now() }, { merge: true });\n  }\n\n  async function deleteNote(noteId) {\n    const docref = doc(db, \"notes\", noteId);\n    await deleteDoc(docref);\n  }\n  return (\n    <main>\n      {notes.length > 0 ? (\n        <Split sizes={[30, 70]} direction=\"horizontal\" className=\"split\">\n          <Sidebar\n            notes={sortArr}\n            currentNote={currentNote}\n            setCurrentNoteId={setCurrentNoteId}\n            newNote={createNewNote}\n            deleteNote={deleteNote}\n          />\n          <Editor\n            tempNoteText={tempNoteText}\n            setTempNoteText={setTempNoteText}\n          />\n        </Split>\n      ) : (\n        <div className=\"no-notes\">\n          <h1>You have no notes</h1>\n          <button className=\"first-note\" onClick={createNewNote}>\n            Create one now\n          </button>\n        </div>\n      )}\n    </main>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}